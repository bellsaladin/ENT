{% extends 'BseInscriptionBundle::layout.html.twig' %}

{% block subTitle %}Nouvelle candidature {% endblock %}

{% block content %}    					
    	{{ form_start(form, {'method': 'POST', 'attr': {'id': 'newInscriptionForm'}} ) }} 
    		<input type="hidden" name="firstInscription" value="{{ first }}">
    		<div id="rootwizard" style="margin-top:40px">
			<div class="col-xs-3">
				<ul class="nav nav-tabs tabs-left" style="height: 580px;">
				  	<li class="active"><a href="#tab1" data-toggle="tab">Etape 1 : Choix de la filière</a></li>
					<li><a href="#tab2" data-toggle="tab">Etape 2 : Informations générales</a></li>
					<li><a href="#tab3" data-toggle="tab">Etape 3 : Cursus</a></li>		
					<li><a href="#tab4" data-toggle="tab">Etape 4 : Validation</a></li>					
				</ul>
			</div>
			<div class="col-xs-9">
				<div class="tab-content">
					    <div class="tab-pane active" id="tab1">
					      	<h3>Candidature - Etape 1 : Choix de la filière </h3>
					      	<hr style="margin-bottom:30px"/>
					    	<div>{{ form_errors(form) }}</div>

					    	<div class="row">
						    	<div class="col-xs-12 col-md-12 col-lg-12">
								    <div class="form-group">
								        <label>Choisissez la filière où vous désirez déposer votre candidature</label>
								        <p>{{ form_errors(form.filiere) }}</p>
								        <select id="{{ form.filiere.vars.id }}" name="{{ form.filiere.vars.full_name }}" class="form-control input-md">
								        	<option value="Qualité du Logiciel">Qualité du Logiciel</option>
								        	<option value="Energies Renouvelables">Energies Renouvelables</option>
								        	<option value="Biotechnologies alimentaires et santé">Biotechnologies alimentaires et santé</option>
								        	<option value="...">...</option>
								        </select>							        			    
								    </div>	
								    <div class="alert alert-info" role="alert">
  										Note : Vous allez pouvoir postuler à d'autres filières après avoir cette procédure de candidature.
									</div>			    				    			    
								</div>
							</div>
					    </div>

					    <div class="tab-pane" id="tab2">
					        <h3>Candidature - Etape 2 : Informations générales</h3>
					        <hr style="margin-bottom:30px"/>
					    	
					    	<div>{{ form_errors(form) }}</div>

					    	<div class="row">
						    	<div class="col-xs-12 col-md-6 col-lg-6">								    
								    <div class="form-group">
								        <label>Prénom</label>
								        <p>{{ form_errors(form.prenom) }}</p>
								        <input type="text" id="txt_prenom" name="{{ form.prenom.vars.full_name }}" placeholder="ex : Ahmed" class="form-control input-sm"/>	
								    </div>
								    <div class="form-group">
								        <label>Nom</label>
								        <p>{{ form_errors(form.nom) }}</p>
								        <input type="text" id="txt_nom" name="{{ form.nom.vars.full_name }}" placeholder="ex : Talal" class="form-control input-sm"/>	
								    </div>
								    <div class="form-group">
								        <label>CIN</label>
								        <p>{{ form_errors(form.cin) }}</p>
								        <input type="text" id="txt_cin" name="{{ form.cin.vars.full_name }}" placeholder="ex : G 42402" class="form-control input-sm"/>	
								    </div>
								    <div class="form-group">
								        <label>CNE</label>
								        <p>{{ form_errors(form.cne) }}</p>
								        <input type="text" id="txt_cne" name="{{ form.cne.vars.full_name }}" placeholder="ex : 30494800" class="form-control input-sm"/>	
								    </div>	
								    <div class="form-group">
								        <label>{{ form_label(form.adresse) }}</label>
								        <p>{{ form_errors(form.adresse) }}</p>
								        <textarea id="txt_adresse" name="{{ form.adresse.vars.full_name }}" placeholder="ex : " class="form-control input-sm"></textarea>
								    </div>
								</div>									
								<div class="col-xs-12 col-md-6 col-lg-6">									
								    <div class="form-group">
								        <label>Sexe</label>	
								        <p></p>
								        <select id="{{ form.sexe.vars.id }}" name="{{ form.sexe.vars.full_name }}" class="form-control input-sm">
								        	<option value="M">Masculin</option>
								        	<option value="F">Féminin</option>
								        </select>							        			    
								    </div>
									<div class="form-group">
								        <label>{{ form_label(form.dateNaissance) }}</label>
								        <p>{{ form_errors(form.dateNaissance) }}</p>
								        {{ form_widget(form.dateNaissance) }}
							        </div>
							        <div class="form-group">
								        <label>Pays</label>	
								        <p></p>
								        <select id="{{ form.pays.vars.id }}" name="{{ form.pays.vars.full_name }}" class="form-control input-sm">
								        	<option value="Maroc">Maroc</option>
								        	<option value="Autre">Autre</option>
								        </select>						        			    
								    </div>
								    <div class="form-group">
								        <label>{{ form_label(form.ville) }}</label>
								        <p>{{ form_errors(form.ville) }}</p>
								        <input type="text" id="txt_ville" name="{{ form.ville.vars.full_name }}" placeholder="ex : Kénitra" class="form-control input-sm"/>	
								    </div>
								</div>
							</div>
					    </div>

						<div class="tab-pane" id="tab3">
							<h3>Candidature - Etape 3 : Cursus</h3>
		    				<hr style="margin-bottom:30px"/>
					    	<div>{{ form_errors(form) }}</div>

					    	<div class="row">
					    		<div class="row col-xs-12">
					    			<div class="form-group">
								        <label>Etablissement d'origine</label>
								        <p>{{ form_errors(form.filiere) }}</p>
								        <select id="{{ form.etablissementOrigine.vars.id }}" name="{{ form.etablissementOrigine.vars.full_name }}" class="form-control input-sm">
								        	<option value="Université Ibn Tofail">Université Ibn Tofail</option>
								        	<option value="...">...</option>								        	
								        </select>							        			    
								    </div>
					    			<div class="form-group">
								        <label>Type du diplôme</label>
								        <p>{{ form_errors(form.typeDiplome) }}</p>
								        <select id="{{ form.typeDiplome.vars.id }}" name="{{ form.typeDiplome.vars.full_name }}" class="form-control input-md">
								        	<option value="LF">Licence fondamentale</option>
								        	<option value="LP">Licence professionnelle</option>
								        </select>							        			    
								    </div>
								    <div class="form-group">
								        <label>{{ form_label(form.intituleDiplome) }}</label>
								        <p>{{ form_errors(form.intituleDiplome) }}</p>
								        <input type="text" name="{{ form.intituleDiplome.vars.full_name }}" placeholder="ex : Licence fondamentale SMI" class="form-control input-sm"/>	
								    </div>									
								</div>
								<div class="row">
									<div class="col-xs-4">
									    <div class="form-group">
									        <label>Mention</label>	
									        <p></p>
									        <select id="{{ form.mention.vars.id }}" name="{{ form.mention.vars.full_name }}" class="form-control input-sm">
									        	<option value="Passable">Passable</option>
									        	<option value="Assez bien">Assez bien</option>
									        	<option value="Bien">Bien</option>
									        	<option value="Très bien">Passable</option>
									        	<option value="Excellent">Passable</option>
									        </select>						        			    
									    </div>
									</div>
									<div class="col-xs-4">
									    <div class="form-group">
									        <label>Année d'obtention</label>	
									        <p></p>
									        <select id="{{ form.anneeObtention.vars.id }}" name="{{ form.anneeObtention.vars.full_name }}" class="form-control input-sm">
									        	{% for i in 2013..2005 %}
									        	<option value="{{ i }}">{{ i }}</option><?php } ?>
									        	{% endfor %}
									        </select>						        			    
									    </div>
									</div>
									<div class="col-xs-4">
									    <div class="form-group">
									        <label>Année d'inscription</label>	
									        <p></p>
									        <select id="{{ form.anneeInscription.vars.id }}" name="{{ form.anneeInscription.vars.full_name }}" class="form-control input-sm">
									        	{% for i in 2013..2005 %}
									        	<option value="{{ i }}">{{ i }}</option><?php } ?>
									        	{% endfor %}
									        </select>						        			    
									    </div>
									</div>									
								</div>
								<div class="row col-xs-12">								    	
					    			<div class="form-group" style="padding: 10px 0;">
								        <label>Diplôme étranger ? &nbsp;&nbsp;<span>{{ form_widget(form.diplomeEtranger) }}</span></label>
								    </div>
								</div>
								<h4>Notes :</h4>
								<div class="row">
							    	<div class="col-xs-12 col-md-4 col-lg-4">
									    <div class="form-group">
									        <label>Semestre 1</label>
									        <p>{{ form_errors(form.noteS1) }}</p>
									        <input type="text" name="{{ form.noteS1.vars.full_name }}" placeholder="ex : 13,50" class="form-control input-sm"/>	
								        </div>
									</div>
									<div class="col-xs-12 col-md-4 col-lg-4">
										<div class="form-group">
									        <label>Semestre 2</label>
									        <p>{{ form_errors(form.noteS2) }}</p>
									        <input type="text" name="{{ form.noteS2.vars.full_name }}" placeholder="ex : 11,00" class="form-control input-sm"/>	
									    </div>
									</div>
									<div class="col-xs-12 col-md-4 col-lg-4">
										<div class="form-group">
									        <label>Semestre 3</label>
									        <p>{{ form_errors(form.noteS3) }}</p>
									        <input type="text" name="{{ form.noteS3.vars.full_name }}" placeholder="ex : 14,00" class="form-control input-sm"/>	
								        </div>	    
									</div>
								</div>
								<div class="row">
							    	<div class="col-xs-12 col-md-4 col-lg-4">
								        <div class="form-group">
									        <label>Semestre 4</label>
									        <p>{{ form_errors(form.noteS4) }}</p>
									        <input type="text" name="{{ form.noteS4.vars.full_name }}" placeholder="ex : 10,00" class="form-control input-sm"/>	
									    </div>
									</div>
									<div class="col-xs-12 col-md-4 col-lg-4">
								        <div class="form-group">
									        <label>Semestre 5</label>
									        <p>{{ form_errors(form.noteS5) }}</p>
									        <input type="text" name="{{ form.noteS5.vars.full_name }}" placeholder="ex : 14,00" class="form-control input-sm"/>	
								        </div>		    
									</div>
									<div class="col-xs-12 col-md-4 col-lg-4">
								        <div class="form-group">
									        <label>Semestre 6</label>
									        <p>{{ form_errors(form.noteS6) }}</p>
									        <input type="text" name="{{ form.noteS6.vars.full_name }}" placeholder="ex : 10,00"class="form-control input-sm"/>	
									    </div>		    
									</div>
								</div>
							</div>	
						</div>	 

						<div class="tab-pane" id="tab4">
							<h3>Candidature - Etape 4 : Validation de la demande de candidature</h3>
		    				<hr style="margin-bottom:30px"/>
					    	<div>{{ form_errors(form) }}</div>

					    	<div class="row">
						    	<div class="col-xs-12">
						    	{% if first == "first" %}	
								    <div class="form-group">
								    	<p>Un dossier de candidature vous sera créé avec votre email comme identifiant et sera protégé avec un mot de passe. Vous allez pouvoir consulter votre dossier en indiquant votre email et le mot de passe correspondant.<br/><br/>
								    	<b>Veuillez choisir un mot de passe pour votre dossier.</b></p>
								    </div>
								    <div class="col-xs-4">
								    	<div class="form-group">
									        <label>{{ form_label(form.email) }}</label>
									        <p>{{ form_errors(form.email) }}</p>
									        <input type="email" id="txt_email" name="{{ form.email.vars.full_name }}" placeholder="ex : monemail@gmail.com" class="form-control input-sm"/>
								    	</div>
									    <div class="form-group">
									        <label>Mot de passe</label>								        
									        <input type="password" id="txt_motDePasse" name="{{ form.motDePasse.vars.full_name }}" class="form-control input-sm"/>	
								        </div>
								        <div class="form-group">
									        <label>Confirmation du mot de passe</label>								        
									        <input type="password" id="txt_motDePasseConfirmation" name="txt_motDePasseConfirmation" class="form-control input-sm"/>	
									    </div>
									</div>									
								{% else %}	
									<div class="form-group">
								    	<p>Cette nouvelle candidature sera ajouté à votre dossier de candidatures.</p><br/>
								    	<p>Veuillez envoyer votre demande.</p>
								    </div>
								{% endif %}	
								</div>
							</div>
						</div>
					    <div class="form-group">		        
					        {{ form_row(form._token) }}
					        <!-- <input type="submit" class="btn btn-primary" value="Enregistrer"/> -->
				    	</div>	
				    </div>

				    <div class="pager wizard">					
						<li class="previous" style="background-color: #83A29A;color:#fff"><a href="javascript:;">Etape précedente</a></li>					
					  	<li class="next"><a href="javascript:;">Etape suivante</a></li>
						<li class="next finish" style="display:none;"><a href="javascript:;" style="background-color:#2A2; border:0; color:#fff">Envoyer la demande de candidateure</a></li>
					</div>

				</div>					
			</div>	
			<ul class="record_actions hide">
			    <li>
			        <a href="{{ path('inscription') }}">
			            Back to the list
			        </a>
			    </li>
			</ul>
		</div>

	    		    				    	
    	{{ form_end(form,{'render_rest': false}) }}



<script type="text/javascript">  

	$(document).ready(function() {
	  	$('#rootwizard').bootstrapWizard({
	  		'tabClass': 'nav nav-tabs',
	  		onTabClick: function(tab, navigation, index) {	
				//var current = index+1;
	  			// var indexOfClickedTab = tab.att('');
	  			// alert(tab.attr('href') + tab.html());

				return false;
			},
			onNext: function(tab, navigation, index) {
				if(index==2) {
					// Make sure we entered the name
					if(!$("#newInscriptionForm").valid()){
						return false;
					}
					/*if(!$('#txt_cin').val()) {
						alert('Veuillez saisir un cne valid');
						$('#txt_cin').focus();
						return false;
					}*/
				}
				
				// Set the name for the next tab
				//$('#tab3').html('Hello, ' + $('#name').val());
			
			},
		  	onTabShow: function(tab, navigation, index) {
				var $total = navigation.find('li').length;
				var $current = index+1;
				var $percent = ($current/$total) * 100;
				$('#rootwizard').find('.bar').css({width:$percent+'%'});
				
				// If it's the last tab then hide the last button and show the finish instead
				if($current >= $total) {
					$('#rootwizard').find('.pager .next').hide();
					$('#rootwizard').find('.pager .finish').show();
					$('#rootwizard').find('.pager .finish').removeClass('disabled');
				} else {
					$('#rootwizard').find('.pager .next').show();
					$('#rootwizard').find('.pager .finish').hide();
				}		
			}
		});

	  	$('#rootwizard .finish').click(function() {			
			if($("#newInscriptionForm").valid()){
				$( "#newInscriptionForm" ).submit();
			}				
		});
		
		$("#newInscriptionForm").validate();

		$( "#txt_email" ).rules( "add", {required: true} );
  		$( "#txt_nom" ).rules( "add", {required: true} );
  		$( "#txt_prenom" ).rules( "add", {required: true} );
  		$( "#txt_cin" ).rules( "add", {required: true} );
  		$( "#txt_cne" ).rules( "add", {required: true} );
  		$( "#txt_ville" ).rules( "add", {required: true} );
  		$( "#txt_adresse" ).rules( "add", {required: true} );
		$( "#txt_motDePasse" ).rules( "add", {required: true} );
		$.validator.addMethod("passwordCheck", function (value, element) {
        		return value == $("#txt_motDePasse").val(); 
        }, 'La confirmation du mot de passe ne correspond pas au mot de passe renseigné');
		$( "#txt_motDePasseConfirmation" ).rules( "add", {required:true, passwordCheck: true} );  	
	});
</script>


<script src="{{ asset('bundles/bseinscription/js/jquery.bootstrap.wizard.min.js') }}"></script>
<script src="{{ asset('bundles/bseinscription/js/jquery-validate.bootstrap-tooltip.min.js') }}"></script>
<script src="{{ asset('bundles/bseinscription/js/jquery.validate.min.js') }}"></script>
<script src="{{ asset('bundles/bseinscription/js/jquery-validate.bootstrap-tooltip.min.js') }}"></script>


{% endblock %}
